{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
----------------------------------------------------------------------------------
# ggplot
```{r}
library(ggplot2)
ggplot(data = TPtotal, aes(x=TPPM, y=TPWD, group=1))+
geom_line(linetype = "dashed")+
geom_point()
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
#長條圖
ggplot(data = TPtotal, aes(x=TPPM,y=TPWD,fill=TPPM))+
geom_bar(stat="identity")
#盒形圖
ggplot(TPtotal,aes(x=日期,y=PM2.5avg))+
geom_boxplot()
#雙連圖
ggplot(data = TPtotal,aes(x=PM2.5avg,y=日期))+
geom_point()
```
-----------------------------------------------------------------------------------
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
fata_top15
EVTYPE all.fata
99 EXCESSIVE HEAT 1903
2 TORNADO 1660
20 FLASH FLOOD 978
27 HEAT 937
15 LIGHTNING 816
利用上面数据绘图
ggplot(fata_top15, aes(x=EVTYPE, y=all.fata)) +
geom_bar(stat ="identity",width=0.8)+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
fata_top15
EVTYPE all.fata
99 EXCESSIVE HEAT 1903
2 TORNADO 1660
20 FLASH FLOOD 978
27 HEAT 937
15 LIGHTNING 816
利用上面数据绘图
ggplot(fata_top15, aes(x=EVTYPE, y=all.fata)) +
geom_bar(stat ="identity",width=0.8)+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
----------------------------------------------------------------------------------
# ggplot
TPtotal <- transform(TPtotal, TPPM = factor(TPPM, levels = unique(TPPM)))
----------------------------------------------------------------------------------
# ggplot
TPtotal <- transform(TPtotal, TPPM = factor(TPPM, levels = unique(TPPM)))
TPtotal <- transform(TPtotal, TPPM = factor(TPPM, levels = unique(TPPM)))
View(TPtotal)
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
View(TPPM)
----------------------------------------------------------------------------------
# ggplot
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = (), ordered = TRUE )
----------------------------------------------------------------------------------
# ggplot
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = (TPtotal$TPPM), ordered = TRUE )
----------------------------------------------------------------------------------
# ggplot
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = (TPPM), ordered = TRUE )
levels(TPPM)
levels(TPPM)
factor(TPPM)
levels(TPPM)
View(TPPM)
levels(TPPM)
factor(TPPM)
f <- factor(TPPM)
f
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
levels(TPPM)
f <- factor(TPPM)
f
levels(TPPM)
----------------------------------------------------------------------------------
# ggplot
TPPM <- factor(TPPM, levels = (TPPM), ordered = TRUE )
----------------------------------------------------------------------------------
# ggplot
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = c("5-14 years","15-24 years", "25-34 years", "35-54 years", "55-74 years",   "75+ years" ), ordered = TRUE )
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = c("5-14 years","15-24 years", "25-34 years", "35-54 years", "55-74 years",   "75+ years" ), ordered = TRUE )
-----------------------------------------------------------------------------------
library(stats)
library(base)
library(dplyr)
library(ggplot2)
library(ggfortify)
library(tidyr)
library(magrittr)
a=c()
i=1979
while(i<2016){
a<-append(a, toString(i), after = length(a))
i=i+1
}
filename1 <- "Unemployment Rate by Year Since 1929 Compared to Inflation and GDP.csv"
data1<-read.csv(filename1)
View(TPWD)
View(TPWD)
View(TPtotal)
order(TPtotal$TPWD)
sort(TPtotal$TPWD)
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
T <- sort(TPtotal$TPWD)
T
data.frame(T) <- sort(TPtotal$TPWD)
T <- data.frame(T)
View(`T`)
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
T <- sort(TPtotal$TPWD)
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
TPtotal$TPWD <- sort(TPtotal$TPWD)
TPtotal$TPWD <- sort(TPtotal$TPWD,  decreasing = FALSE)
TPtotal$TPWD <- order(TPtotal$TPWD,  decreasing = FALSE)
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
order(TPtotal$TPWD, decreasing = FALSE)
TPtotal$TPWD <- order(TPtotal$TPWD, decreasing = FALSE)
ggplot(data = TPtotal, aes(x=TPPM, y=TPWD, group=1))+
geom_line(linetype = "dashed")+
geom_point()
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
TPtotal$TPWD <- sort(TPtotal$TPWD, decreasing = FALSE)
TPtotal$TPWD <- sort(TPtotal$TPWD)
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
TPtotal$TPWD <- sort(TPtotal$TPWD)
library(dplyr)
library(ggplot2)
setwd("C:/Users/jeff6/Desktop")
a <- read.csv("空氣品質監測小時值台北.csv")
b <- filter(a, 測項.單位. %in% c("溫度 AMB_TEMP (℃)", "風向 WIND_DIREC (degrees)", "細懸浮微粒 PM 2.5  (μg/m 3 )", "相對濕度 RH (percent)" ))
b = b[-13, ]
TEMP = filter(b, 測項.單位. %in% "溫度 AMB_TEMP (℃)")
WD = filter(b, 測項.單位. %in% "風向 WIND_DIREC (degrees)")
PM = filter(b, 測項.單位. %in% "細懸浮微粒 PM 2.5  (μg/m 3 )")
RH = filter(b, 測項.單位. %in% "相對濕度 RH (percent)")
#刪除1~6
for (x in (1:6))
{
TEMP <- TEMP[ ,-1]
WD <- WD[ ,-1]
PM <- PM[ ,-1]
RH <- RH[ ,-1]
}
#取數值,合併成一行
TPTEMP <- filter(TEMP[1, ])
TPWD <- filter(WD[1, ])
TPPM <- filter(PM[1, ])
TPRH <- filter(RH[1, ])
for (i in 2:6)
{
TPTEMP <- cbind(TPTEMP,filter(TEMP[i, ]))
TPWD <- cbind(TPWD,filter(WD[i, ]))
TPPM <- cbind(TPPM,filter(PM[i, ]))
TPRH <- cbind(TPRH,filter(RH[i, ]))
}
TPTEMP <- t(TPTEMP)
TPTEMP <- data.frame(TPTEMP)
TPWD <- t(TPWD)
TPWD <- data.frame(TPWD)
TPPM <- t(TPPM)
TPPM <- data.frame(TPPM)
TPRH <- t(TPRH)
TPRH <- data.frame(TPRH)
#合併total
TPtotal <- bind_cols(TPTEMP,TPWD,TPPM,TPRH)
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
----------------------------------------------------------------------------------
#照數字大小排列
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = c(1:35 ), ordered = TRUE )
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = c(1:35 ), ordered = TRUE )
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
TPtotal$TPPM <- factor(TPtotal$TPPM, levels = c(1:35 ), ordered = TRUE )
TPtotal$TPWD <- factor(TPtotal$TPWD, levels = c(1:365 ), ordered = TRUE )
#散佈圖
ggplot(data = TPtotal)+
geom_point(aes(x=TPPM,y=TPWD,color=TPPM))
---
title: "永和區PM2.5和氣象資料比較關係"
author: "陳哲偉"
date: "2019年7月11日"
output: html_document
---
###### 資料來源 (空氣品質監測網https://taqm.epa.gov.tw/taqm/tw/YearlyDataDownload.aspx)
###### (觀測資料查詢https://e-service.cwb.gov.tw/HistoryDataQuery/index.jsp)
# 設定檔案位置和載入套件
```{r}
setwd("C:/Users/jeff6/Desktop/Github/alan/Week1-4")
library(dplyr)
```
# 整理永和區氣象資料
```{r}
YHml01<- read.csv("C0AH10-2018-01.csv")
YHml02<- read.csv("C0AH10-2018-02.csv")
YHml03<- read.csv("C0AH10-2018-03.csv")
YHml04<- read.csv("C0AH10-2018-04.csv")
YHml05<- read.csv("C0AH10-2018-05.csv")
YHml06<- read.csv("C0AH10-2018-06.csv")
YHml07<- read.csv("C0AH10-2018-07.csv")
YHml08<- read.csv("C0AH10-2018-08.csv")
YHml09<- read.csv("C0AH10-2018-09.csv")
YHml10<- read.csv("C0AH10-2018-10.csv")
YHml11<- read.csv("C0AH10-2018-11.csv")
YHml12<- read.csv("C0AH10-2018-12.csv")
YHml01data <- select(YHml01, ObsTime, Temperature, RH, WD, Precp)
YHml02data <- select(YHml02, ObsTime, Temperature, RH, WD, Precp)
YHml03data <- select(YHml03, ObsTime, Temperature, RH, WD, Precp)
YHml04data <- select(YHml04, ObsTime, Temperature, RH, WD, Precp)
YHml05data <- select(YHml05, ObsTime, Temperature, RH, WD, Precp)
YHml06data <- select(YHml06, ObsTime, Temperature, RH, WD, Precp)
YHml07data <- select(YHml07, ObsTime, Temperature, RH, WD, Precp)
YHml08data <- select(YHml08, ObsTime, Temperature, RH, WD, Precp)
YHml09data <- select(YHml09, ObsTime, Temperature, RH, WD, Precp)
YHml10data <- select(YHml10, ObsTime, Temperature, RH, WD, Precp)
YHml11data <- select(YHml11, ObsTime, Temperature, RH, WD, Precp)
YHml12data <- select(YHml12, ObsTime, Temperature, RH, WD, Precp)
YHMLdata <- data.frame(rbind(YHml01data,YHml02data,YHml03data,YHml04data,YHml05data,YHml06data,YHml07data,YHml08data,YHml09data,YHml10data,YHml11data,YHml12data))
YHMLdata
```
# 整理永和區PM2.5資料
```{r}
YHap<- read.csv("107年永和站PM2.5.csv")
YHPM2.5 <- filter(YHap, 測項 %in% c("PM2.5"))
PM2.5sum <- (rowSums(YHPM2.5[ , 4:27]))
PM2.5avg <- (rowMeans(YHPM2.5[ , 4:27]))
avg <- data.frame(PM2.5avg)
sum <- data.frame(PM2.5sum)
avg
sum
```
# 合併兩個資料
```{r}
final <- bind_cols(YHMLdata,avg,sum)
final
```
# 新增一欄 日期
final$日期 <- c(1:365)
View(final)
------------------------------------------------------------------------------------------
# ggplot
```{r}
library(ggplot2)
ggplot(data = final, aes(x=PM2.5sum, y=WD, group=1))+
geom_line(linetype = "dashed")+
geom_point()
#散佈圖
ggplot(data = final)+
geom_point(aes(x=Precp>20,y=Precp,color=PM2.5avg))
#散佈圖
ggplot(data = final)+
geom_point(aes(x=Precp,y=Precp,color=PM2.5avg))
#散佈圖
ggplot(data = final)+
geom_point(aes(x=Precp,y=PM2.5avg,color=Precp))
#散佈圖
ggplot(data = final)+
geom_point(aes(x=WD,y=PM2.5avg,color=WD))
